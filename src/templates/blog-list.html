<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TouchBase Blog</title>
    <meta name="description" content="Latest posts and updates from TouchBase: Your Personal CRM for meaningful relationships">
    <link rel="canonical" href="https://touchbase.site/blog">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Open Graph -->
    <meta property="og:title" content="TouchBase Blog">
    <meta property="og:description" content="Latest posts and updates from TouchBase: Your Personal CRM for meaningful relationships">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://touchbase.site/og.png">
    <meta property="og:url" content="https://touchbase.site/blog">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TouchBase Blog">
    <meta name="twitter:description" content="Latest posts and updates from TouchBase: Your Personal CRM for meaningful relationships">
    <meta name="twitter:image" content="https://touchbase.site/og.png">
    
    <link href="/static.css" rel="stylesheet">

    <!-- Schema.org JSON-LD structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "TouchBase Blog",
      "description": "Latest posts and updates from TouchBase: Your Personal CRM for meaningful relationships",
      "url": "https://touchbase.site/blog",
      "publisher": {
        "@type": "Organization",
        "name": "TouchBase Technologies",
        "url": "https://touchbase.site",
        "logo": {
          "@type": "ImageObject",
          "url": "https://touchbase.site/icon.svg"
        }
      },
      "mainEntity": {
        "@type": "SoftwareApplication",
        "name": "TouchBase",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web, iOS, Android",
        "offers": {
          "@type": "Offer",
          "price": "3",
          "priceCurrency": "USD",
          "priceValidUntil": "2025-12-31"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "261"
        },
        "featureList": [
          "Smart Contact Management",
          "Interaction History Tracking",
          "Intelligent Reminders",
          "Relationship Insights",
          "Personalised Suggestions",
          "Conversation Prompt Generator",
          "Cross-Platform Support",
          "Privacy-Focused Design"
        ]
      }
    }
    </script>
</head>
<body class="bg-gray-50">
    <div id="root">
        <nav class="bg-white/60 backdrop-blur-xl sticky top-0 z-50 border-b border-gray-100/50">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-14">
                    <div class="flex-1 flex items-center justify-between">
                        <a href="/" class="inline-flex items-baseline text-2xl font-bold group -ml-3 px-3 py-2 rounded-xl hover:bg-gray-50/50 transition-all duration-200">
                            <img src="/icon.svg" alt="Blue heart icon" class="h-7 w-7 mr-0.5 group-hover:scale-105 group-hover:brightness-90 transition-all duration-200 translate-y-[5px]">
                            <span class="bg-gradient-to-r from-primary-600 to-primary-400 group-hover:from-primary-700 group-hover:to-primary-500 bg-clip-text text-transparent transition-all duration-200">
                                TouchBase
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <main role="main" class="min-h-[80vh] flex flex-col px-4 py-16">
            <div class="max-w-4xl mx-auto w-full">
                <nav aria-label="Breadcrumb" class="mb-8">
                    <ol class="flex flex-wrap items-center justify-center gap-2 text-gray-500" itemscope itemtype="https://schema.org/BreadcrumbList">
                        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                            <a href="/" itemprop="item" class="breadcrumb-link">
                                <span itemprop="name">Home</span>
                            </a>
                            <meta itemprop="position" content="1" />
                        </li>
                        <li>/</li>
                        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                            <span itemprop="name" class="text-gray-500">Blog</span>
                            <meta itemprop="position" content="2" />
                        </li>
                    </ol>
                </nav>
                
                <div class="text-center mb-12">
                    <h1 class="text-4xl sm:text-5xl font-[650] bg-gradient-to-r from-primary-600/90 to-primary-400/90 bg-clip-text text-transparent tracking-[-0.02em] py-2">TouchBase Blog</h1>
                    <p class="mt-3 text-xl text-gray-600/90">
                        Latest posts and updates
                    </p>
                </div>
                
                <div class="space-y-8" id="posts-grid">
                    <!-- Posts will be injected here -->
                </div>
            </div>
        </main>

        <footer class="text-center pt-2 pb-5 text-gray-600 text-sm">
            © <span id="currentYear"></span> TouchBase Technologies
        </footer>
    </div>
<!-- Schema.org ItemList for blog posts -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": BLOG_POSTS_LIST_SCHEMA
}
</script>

<script>
    // This will be replaced with actual data during build
    const posts = POSTS_DATA;
    
    // Sort posts by date (latest first)
    const sortedPosts = Array.isArray(posts) ?
        posts
            .filter(post => post && post.publishedAt)
            .sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt))
        : [];
    const postsPerPage = 10;
    let currentPage = 1;
    
    function renderPosts() {
        const grid = document.getElementById('posts-grid');
        
        // Debug log to check posts data
        console.log('Posts data:', sortedPosts);
        
        if (!sortedPosts || sortedPosts.length === 0) {
            grid.innerHTML = '<div class="text-center text-gray-500">No posts available</div>';
            return;
        }
        
        const startIndex = (currentPage - 1) * postsPerPage;
        const endIndex = startIndex + postsPerPage;
        const currentPosts = sortedPosts.slice(startIndex, endIndex);
        
        // Remove existing pagination if present
        const existingPagination = document.querySelector('#posts-grid + div');
        if (existingPagination) {
            existingPagination.remove();
        }

        grid.innerHTML = currentPosts.map(post => `
            <a href="/blog/${post.slug.current}" class="blog-post-card">
                ${post.mainImage ? `
                    <div class="sm:w-64 flex-shrink-0">
                        <img class="blog-post-image" src="${post.mainImage}" alt="${post.title}">
                    </div>
                ` : ''}
                <div class="blog-post-content">
                    <div class="flex-1">
                        ${post.categories && post.categories.length ? `
                            <div class="flex flex-wrap gap-2 mb-3">
                                ${post.categories.map(category => `
                                    <span class="blog-post-tag">${category}</span>
                                `).join('')}
                            </div>
                        ` : ''}
                        <h3 class="blog-post-title">${post.title}</h3>
                        ${post.excerpt ? `
                            <p class="blog-post-excerpt">${post.excerpt}</p>
                        ` : ''}
                    </div>
                    <div class="blog-post-meta">
                        <span>
                            ${new Date(post.publishedAt).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            })}
                        </span>
                        <span class="text-gray-400 mx-2">•</span>
                        <span>${post.readingTime} min read</span>
                    </div>
                </div>
            </a>
        `).join('');

        // Add pagination if there are more posts
        if (sortedPosts.length > postsPerPage) {
            const totalPages = Math.ceil(sortedPosts.length / postsPerPage);
            const paginationHtml = `
                <div class="flex justify-center gap-3 mt-8">
                    ${Array.from({ length: totalPages }, (_, i) => i + 1).map(pageNum => `
                        <button
                            class="px-4 py-2 rounded-lg font-medium transition-all duration-200 ${pageNum === currentPage
                                ? 'bg-primary-500 text-white shadow-soft'
                                : 'bg-white/60 backdrop-blur-sm text-gray-600/90 hover:bg-gray-50/80 shadow-sm'}"
                            onclick="changePage(${pageNum})"
                        >
                            ${pageNum}
                        </button>
                    `).join('')}
                </div>
            `;
            grid.insertAdjacentHTML('afterend', paginationHtml);
        }
    }

    function changePage(pageNum) {
        currentPage = pageNum;
        renderPosts();
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    renderPosts();
    
    // Update current year in footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
</body>
</html>