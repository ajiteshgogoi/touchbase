<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <!-- Instagram Browser Handling -->
    <script>
      (function() {
        // Initial setup with fallbacks
        window.__TB = { ready: false };
        var html = document.documentElement;
        var ua = navigator.userAgent || '';
        var isIOS = /iPad|iPhone|iPod/.test(ua);
        var isInstagram = /Instagram/.test(ua) ||
          (isIOS && (/FBAN/.test(ua) || /FBAV/.test(ua) || /FBIOS/.test(ua)));

        // Set a placeholder for Instagram browser
        if (isInstagram) {
          var instructions = isIOS
            ? "Tap ⋯ then select 'Open in external browser'"
            : "Tap ⋮ then select 'Open in browser'";
          
          // Create a basic UI that works without React
          var style = document.createElement('style');
          style.textContent = `
            .ig-overlay {
              position: fixed;
              top: 0;
              left: 0;
              right: 0;
              bottom: 0;
              background: #f8fafc;
              z-index: 99998;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              text-align: center;
              font-family: system-ui;
              padding: 20px;
            }
            .ig-message {
              max-width: 300px;
              margin-bottom: 20px;
              font-size: 16px;
              line-height: 1.5;
              color: #0f172a;
            }
            .ig-instructions {
              background: #0EA5E9;
              color: white;
              padding: 12px 20px;
              border-radius: 8px;
              font-weight: 500;
            }
          `;
          document.head.appendChild(style);
          
          var div = document.createElement('div');
          div.className = 'ig-overlay';
          div.innerHTML = `
            <div class="ig-message">
              TouchBase cannot run inside Instagram's browser.
              Please open in your device's web browser to use the app.
            </div>
            <div class="ig-instructions">
              ${instructions}
            </div>
          `;
          
          // Add banner when DOM is ready
          document.addEventListener('DOMContentLoaded', function() {
            document.body.appendChild(div);
          });

          // Store detection results
          html.setAttribute('data-ig-browser', 'true');
          html.setAttribute('data-ig-platform', isIOS ? 'ios' : 'android');
        }
        
        // Handle app initialization
        window.__TB.ready = true;
      })();
    </script>
    <meta name="theme-color" content="#0EA5E9" />
    <meta name="description" content="TouchBase — Stay connected with the people who matter most." />
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="TouchBase" />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="TouchBase" />
    <meta property="og:description" content="Stay connected with the people who matter most." />
    <meta property="og:image" content="/og.png" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TouchBase" />
    <meta name="twitter:description" content="Stay connected with the people who matter most." />
    <meta name="twitter:image" content="/og.png" />
    
    <!-- Schema.org markup -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebApplication",
            "@id": "https://touchbase.site/#webapp",
            "name": "TouchBase",
            "url": "https://touchbase.site",
            "applicationCategory": "LifestyleApplication",
            "browserRequirements": "Requires JavaScript. Requires HTML5.",
            "description": "Stay connected with the people who matter most. TouchBase helps you maintain meaningful relationships by tracking interactions and providing timely reminders.",
            "offers": {
              "@type": "Offer",
              "price": "5",
              "priceCurrency": "USD",
              "availability": "https://schema.org/InStock"
            },
            "featureList": [
              "Contact Management",
              "Interaction Tracking",
              "Smart Reminders",
              "Relationship Analytics",
              "Cross-platform Support"
            ],
            "operatingSystem": "Any"
          },
          {
            "@type": "SoftwareApplication",
            "name": "TouchBase",
            "applicationCategory": "LifestyleApplication",
            "operatingSystem": "Any",
            "offers": {
              "@type": "Offer",
              "price": "5",
              "priceCurrency": "USD"
            },
            "aggregateRating": {
              "@type": "AggregateRating",
              "ratingValue": "4.8",
              "ratingCount": "100"
            }
          },
          {
            "@type": "Organization",
            "@id": "https://touchbase.site/#organization",
            "name": "TouchBase",
            "url": "https://touchbase.site",
            "logo": {
              "@type": "ImageObject",
              "url": "https://touchbase.site/icon-512.png",
              "width": "512",
              "height": "512"
            },
            "sameAs": [
              "mailto:ajiteshgogoi@gmail.com"
            ]
          }
        ]
      }
    </script>
    
    <title>TouchBase</title>
  </head>
  <body class="bg-gray-50">
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
