<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <!--
      Early Instagram Browser Detection
      
      This script runs before any other JavaScript to detect Instagram's in-app browser
      and prevent white screen issues on iOS. The solution works by:
      
      1. Running during initial HTML parsing, before React loads
      2. Using reliable UserAgent patterns for detection
      3. Setting data attributes that React can read later
      4. Forcing visibility to prevent white screen on iOS Instagram
      
      The viewport-fit=cover meta tag ensures proper display on notched devices.
      Default visibility is preserved for non-Instagram browsers.
    -->
    <script>
      (function detectInstagram() {
        try {
          // Include empty string fallback for edge cases
          var ua = navigator.userAgent || '';
          var html = document.documentElement;
          
          // iOS detection must happen first as it affects detection strategy
          var isIOS = /iPad|iPhone|iPod/.test(ua);
          
          // Combined detection for both platforms:
          // - Direct Instagram browser check
          // - iOS-specific Facebook/Instagram container checks
          var isInstagram = /Instagram/.test(ua) ||
            (isIOS && (/FBAN/.test(ua) || /FBAV/.test(ua) || /FBIOS/.test(ua)));
          
          if (isInstagram) {
            // Store detection results for React
            html.setAttribute('data-ig-browser', 'true');
            html.setAttribute('data-ig-platform', isIOS ? 'ios' : 'android');
            
            // Force immediate visibility to prevent white screen
            // This is especially important for iOS Instagram
            html.style.visibility = 'visible';
            
            // Ensure body is also visible when DOM is ready
            document.addEventListener('DOMContentLoaded', function() {
              document.body.style.visibility = 'visible';
            });
          }
        } catch (e) {
          console.warn('Early Instagram detection failed:', e);
        }
      })();
    </script>
    <meta name="theme-color" content="#0EA5E9" />
    <meta name="description" content="TouchBase â€” Stay connected with the people who matter most." />
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="TouchBase" />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="TouchBase" />
    <meta property="og:description" content="Stay connected with the people who matter most." />
    <meta property="og:image" content="/og.png" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TouchBase" />
    <meta name="twitter:description" content="Stay connected with the people who matter most." />
    <meta name="twitter:image" content="/og.png" />
    
    <!-- Schema.org markup -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebApplication",
            "@id": "https://touchbase.site/#webapp",
            "name": "TouchBase",
            "url": "https://touchbase.site",
            "applicationCategory": "LifestyleApplication",
            "browserRequirements": "Requires JavaScript. Requires HTML5.",
            "description": "Stay connected with the people who matter most. TouchBase helps you maintain meaningful relationships by tracking interactions and providing timely reminders.",
            "offers": {
              "@type": "Offer",
              "price": "5",
              "priceCurrency": "USD",
              "availability": "https://schema.org/InStock"
            },
            "featureList": [
              "Contact Management",
              "Interaction Tracking",
              "Smart Reminders",
              "Relationship Analytics",
              "Cross-platform Support"
            ],
            "operatingSystem": "Any"
          },
          {
            "@type": "SoftwareApplication",
            "name": "TouchBase",
            "applicationCategory": "LifestyleApplication",
            "operatingSystem": "Any",
            "offers": {
              "@type": "Offer",
              "price": "5",
              "priceCurrency": "USD"
            },
            "aggregateRating": {
              "@type": "AggregateRating",
              "ratingValue": "4.8",
              "ratingCount": "100"
            }
          },
          {
            "@type": "Organization",
            "@id": "https://touchbase.site/#organization",
            "name": "TouchBase",
            "url": "https://touchbase.site",
            "logo": {
              "@type": "ImageObject",
              "url": "https://touchbase.site/icon-512.png",
              "width": "512",
              "height": "512"
            },
            "sameAs": [
              "mailto:ajiteshgogoi@gmail.com"
            ]
          }
        ]
      }
    </script>
    
    <title>TouchBase</title>
  </head>
  <body class="bg-gray-50">
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
